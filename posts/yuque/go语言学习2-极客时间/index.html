<!doctype html><html lang=zh-cn dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>go语言学习(2)-极客时间 | mianhk's notes</title>
<meta name=keywords content="Golang">
<meta name=description content="第一个 go 程序 go 语言主函数没有返回值，需要使用 os 包， os.exit() ，也不能直接函数传参。 变量、常量和其他语言的区别 赋值可以自动类型推断： a:=1 ，怎么方便怎么来">
<meta name=author content="mianhk">
<link rel=canonical href=https://yuguocong.cn/posts/yuque/go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A02-%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/>
<meta name=google-site-verification content="XYZabc">
<meta name=yandex-verification content="XYZabc">
<meta name=msvalidate.01 content="XYZabc">
<link crossorigin=anonymous href=/assets/css/stylesheet.min.5e2b4101351c21e906f398ae96901791830f58d430f96f2659dab7eaef7b3cb7.css integrity="sha256-XitBATUcIekG85iulpAXkYMPWNQw+W8mWdq36u97PLc=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://yuguocong.cn/%3Clink%20/%20abs%20url%3E>
<link rel=icon type=image/png sizes=16x16 href=https://yuguocong.cn/%3Clink%20/%20abs%20url%3E>
<link rel=icon type=image/png sizes=32x32 href=https://yuguocong.cn/%3Clink%20/%20abs%20url%3E>
<link rel=apple-touch-icon href=https://yuguocong.cn/%3Clink%20/%20abs%20url%3E>
<link rel=mask-icon href=https://yuguocong.cn/%3Clink%20/%20abs%20url%3E>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.88.1">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-123 -45','auto'),ga('send','pageview'))</script><meta property="og:title" content="go语言学习(2)-极客时间">
<meta property="og:description" content="第一个 go 程序 go 语言主函数没有返回值，需要使用 os 包， os.exit() ，也不能直接函数传参。 变量、常量和其他语言的区别 赋值可以自动类型推断： a:=1 ，怎么方便怎么来">
<meta property="og:type" content="article">
<meta property="og:url" content="https://yuguocong.cn/posts/yuque/go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A02-%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2019-04-28T21:34:33+08:00">
<meta property="article:modified_time" content="2019-04-28T21:34:33+08:00"><meta property="og:site_name" content="mianhk's notes">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="go语言学习(2)-极客时间">
<meta name=twitter:description content="第一个 go 程序 go 语言主函数没有返回值，需要使用 os 包， os.exit() ，也不能直接函数传参。 变量、常量和其他语言的区别 赋值可以自动类型推断： a:=1 ，怎么方便怎么来">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://yuguocong.cn/posts/"},{"@type":"ListItem","position":2,"name":"go语言学习(2)-极客时间","item":"https://yuguocong.cn/posts/yuque/go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A02-%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"go语言学习(2)-极客时间","name":"go语言学习(2)-极客时间","description":"第一个 go 程序 go 语言主函数没有返回值，需要使用 os 包， os.exit() ，也不能直接函数传参。 变量、常量和其他语言的区别 赋值可以自动类型推断： a:=1 ，怎么方便怎么来","keywords":["Golang"],"articleBody":"第一个 go 程序  go 语言主函数没有返回值，需要使用 os 包， os.exit() ，也不能直接函数传参。  变量、常量和其他语言的区别  赋值可以自动类型推断： a:=1 ，怎么方便怎么来就行 快速连续赋值  const ( Monday=itoa+1 Tuesday Wednesday ) const( Open=1运算符  算数运算符：没有前置的++、– 比较运算符：用 == 比较时，相同维数的数组可以比较 逻辑运算符 位运算符： \u0026^ ：按位清零  1 \u0026^ 0 --1 1\u0026^ 1 --0 0\u0026^1 --0 0\u0026^0 --0 条件和循环  循环：只支持 for ，并且没有括号，while 条件的写法为  for n5{ n++ fmt.Println(n) }  条件：条件一定要是个布尔值或表达式。支持在 if 语句中对变量赋值 switch 条件：条件表达式不限制为常量或者整数；单个 case 中，可以出现多个结果选项，使用逗号分隔；不需要 break；可以不设定 switch 之后的条件表达式  数组和切片 数组  数组的声明：声明同时初始化：arr3:=[...]int{1,3,4,5}  数组的遍历 数组截取：a[index_begin(包含),index_end(不包含)]  切片  切片的声明方式：与数组的声明有点相似  var s0 []int s1:=[]int{} s2:=[]int{1,2,3} s2:=make([]int,2,4) //([]type,len,cap) len个元素会被初始化为零值，  cap中其它未初始化的元素不能访问  切片的增长方式：类似于 c++的 vector。 切片共享存储结构：切片截取后，计算 cap 得到的结果。其实切片截取，指向的是内部共享的切片存储空间。所以修改截取的切片的数据，其他截取的相同区域也会发生改变。这是一个容易出错的问题。  切片和数组的区别  容量是否可伸缩 是否可以进行比较  Map 基础  Map 声明方式  m:=map[string]int{\"one\":1,\"two\":2,\"three\":3} m1:=map[string]int{} m1[\"one\"]=1 m2:=make(map[string]int,10) //10表示初始化的cap,不需要初始化len  元素访问：当访问的 key 不存在时，仍然会返回零值，编程时需要根据 nil 来判断元素是否存在  Map 与工厂模式  Map 的 value 可以是一个方法 与 Go 的 Dock type 接口方式一起，可以方便的实现单一方法对象的工厂模式 Go 内置集合中没有 Set，可以通过 map 实现mySet:=**map**[int]bool{}  字符串  string 是数据类型，不是引用或指针类型。零值不是空，而是空字符串。 string 是只读的 byte slice，不能重复赋值。len 函数可以表示它所包含的 byte 数 string 的 byte 数组可以存放任何数据  Unicode 和 UTF-8  Unicode 是一种字符集（code point） UTF-8 是 Unicode 的存储实现（转换为）  Go 语言的函数  函数可以返回多个值 所有参数都是值传递：slice，map，channel 会有传引用的错觉 函数可以作为变量的值 函数可以作为参数和返回值  可变参数及 defer  延迟执行函数：defer。类似于其他语言中的 finally，主要作用是最后关闭一些资源或者关闭一些锁  行为的定义和实现 封装数据和行为 type Employee struct{ Id string Name string Age int } 实例的创建和初始化 e:=Employee{\"0\",\"Bob\",20} e1:=Employee{Name:\"Mike\",Age:30} e2:=new(Employee) //这里返回的是实例的指针 e2.Id=\"2\" //通过实例的指针访问指针不需要“-” 行为（方法）定义 func (e Employee)String1() string{ return fmt.Sprintf(\"ID:%s-Name:%s-Age:%d\",e.Id,e.Name,e.Age) } //推荐使用的方式，类似于c++的引用 func (e *Employee)String() string{ return fmt.Sprintf(\"ID:%s-Name:%s-Age:%d\",e.Id,e.Name,e.Age) } Go 语言的相关接口 Duck Type 方法签名是一样的，就认为是这样的\n 接口是非入侵性的，实现不依赖于接口定义 接口的定义可以包含在接口使用者包内  接口变量 自定义类型 type IntConv func (op int) int 扩展与复用 不一样的接口类型，一样的多态 空接口与断言  空接口可以表示任何类型 通过断言来将空接口转换为制定类型 v,ok:=p.(int) //ok=true时为转换成功  Go 接口最佳实践  倾向于使用小的接口定义，很多接口只包含一个方法。实现的负担较小。  Type Reader interface{ Read(p []byte)(n int,err error) } Type Writer interface{ Write(p []byte)(n int,err error) }  较大的接口定义，可以由多个小接口定义组合而成。  Type ReadWrite interface{ Reader Writer }  只依赖于必要功能的最小接口，方法才能更多的被复用  func StoreData(reader Reader) error{} 编写好的错误处理  没有异常机制 error 类型实现了 error 接口 可以通过 errors.New 来快速创建错误实例  panic 和 recover panic  panic 用于不可恢复的错误 panic 退出前会执行 defer 指定的内容  panic vs os.Exit  os.Exit 退出时不会调用 defer 指定的函数 os.Exit 退出时不会输出当前调用栈信息  recover defer func(){ if err:=recover();err!=nil{ //恢复错误 } }()  不要强制恢复错误，有的时候“Let it crash”可能更好，让程序重启来恢复。  构建可复用的模块（包） package  基本复用模块单元：以首字母大写来表名可被包外代码访问 代码在 package 可以和所在的目录了不一致（相对于 Java 而言） 同一目录里的 Go 代码的 package 要保持一致  init 方法  在 main 被执行前，所有依赖的 package 的 init 方法都会被执行 不同包的 init 函数按照包导入的依赖关系决定执行顺序 每个包可以有多个 init 函数 包的每个源文件也可以有多个 init 函数，比较特殊  go get  通过 go get 来获取远程依赖  go get -u 强制从网络更新远程依赖  注意代码在 Github 上的组织形式，以适应 go get：直接以代码路径开始，不要有 src  依赖管理 Go 未解决的依赖问题  同一环境下，不同项目使用同一包的不同版本 无法管理对包的特定版本的依赖  vendor 路径 Go1.5 release 版本，vendor 目录被添加到除了 GOPATH 和 GOROOT 以外的依赖目录查找方案。查找依赖包路径的解决方案：\n 当前包下的 vendor 目录 向上级目录查找，直到找到 src 下的 vendor 目录 在 GOPATH 下面查找依赖包 在 GOROOT 目录下查找  其他第三方依赖管理工具：godep，glide，dep **\n协程机制 线程 vs 协程  创建时默认的 stack 大小：JAVA 1M vs Goroutine 2K 和 KSE（Kernel Space Entity）：java Thread 是 1:1；GO M:N  共享内存并发机制 Lock WaitGroup 相当于 Java 的 join\nCSP 并发机制 CSP vs Actor  和 Actor 的直接通讯不同，CSP 模式是通过 Channel 进行通讯的，更松耦合一些 Go 中 Channel 是有容量限制并且独立于处理 Goroutine，而如 Erlang，Actor 模式中的 mailbox 容量是无限的，接收进程也总是被动地处理消息。  Channel 两种情况：一种是一直等待，一种 Buffered Channel ，更松耦合的 Channel，消息发送方可以在容量没满的时候一直放，满了之后需要等待。对于接收方来说，只要 Channel 内有消息就可以一直接收。\n多路选择和超时 select 运行到 select 时，当任一个事件准备好了，就可以对应响应。当不想一直等待某事件时，可以进行超时控制。\nchannel 的关闭和广播 解决怎么知道 channel 数据完了的问题\nchannel 的关闭  向关闭的 channel 发送数据，会导致 panic v,ok所有的 channel 接收者都会在 channel 关闭时，立即从阻塞等待中返回且上述 ok 值为 false。这个广播机制常被利用，进行向多个订阅者发送信号，如：退出信号。  任务的取消 Context 与任务取消 Context  根 Context：通过 context.Background()创建 子 Context：context.WithCancel(parentContext)创建 ctx,cancel：context.WithCancel(context.Background()) 当前 Context 被取消时，基于他的子 context 也会被取消 接收取消通知  还有一些其他的方法\n典型并发任务 只运行一次（常见的并发任务） 在常见的多任务环境下，只执行一次。单例模式（懒汉式，线程安全）\ntype Singleton struct { } var singleInstance *Singleton var once sync.Once func GetSingletonObj() *Singleton{ once.Do(func() { //传入创建方法 \tfmt.Println(\"Create Obj\") singleInstance=new(Singleton) }) return singleInstance } 所需任意任务完成 所有任务完成 对象池 数据库连接，网络连接，经常将这些对象池化，避免重复创建。\nsync.pool 对象缓存 从名字来看，像是 go 语言提供的池。其实是对象的缓存  如果私有对象不存在则保存为私有对象 如果私有对象存在，就放入当前 Processor 子池的共享池中  使用： **sync.pool 对象的生命周期—**sync.pool 不能作为对象池的原因\n GC 会清除 sync.pool 缓存的对象 sync.pool 对象的缓存有效期为下一次 GC 之前  总结：\n 适合于通过复用，降低复杂对象的创建和 GC 代价 协程安全，会有锁的开销 声明周期受 GC 影响，不适合于做连接池等，需自己管理生命周期资源的池化 所以具体要看锁的开销大，还是初始化的开销大  测试 单元测试 表格测试\n内置单元测试框架  Fail，Error：该测试失败，该测试继续，其他测试继续执行 FailNow，Fatal：该测试失败，该测试中止，其他测试继续执行  代码覆盖率\nBenchmark 以 Benchmark 开头，参数类型稍有不同。 通过 ResetTimer 和 StopTimer 将测试代码隔开\n命令行下运行：\nBBD Behavior Driven Development 常用框架：goconvey\n反射编程 万能程序 DeepEqual 比较切片和 map 与配置相关的，要求灵活性和复用性时，可以 反射的\n不安全编程 unsafe，一般涉及到库的交互，与 c 语言交互。 “不安全”行为危险性：Go 语言中不支持强制类型转换。下列操作看似可以，实际不能转换，而且实际使用起来很危险。\ni:=10 f:=*(*floa64)(unsafe.Pointer(\u0026i)) 场景 2：用到内置的 Atomic 操作，指针原子操作，并发读写\n架构模式 Pipe-Filter 架构  非常适合与数据处理及数据分析系统  micro kernel 特点：易于拓展，错误隔离，保持架构一致性 要点：\n 内核包含公共流程或通用逻辑 将可变成或可扩展部分规划为扩展点 抽象扩展点行为，定义接口 利用插件进行扩展  生产过程任务的开发\n内置 json 解析 远程过程调用等过程中，会用 json，以及在配置文件中，很多使用 json\neasyjson go 内置的，一般适用于配置文件解析，对于 qps 较高，运用了反射，效率较低。尽量使用高性能的 json 解析\nHTTP 服务 构建 Restful 服务 更好的 router，httprouter 面向资源的架构（Resource Oriented Architecture）\n性能分析工具 学习函数式编程：《计算机程序的构造和解释》functional programming 《Restful Web Service》 《Go 程序设计语言》 《面向模式的软件架构》1,2,3 本\n","wordCount":"3507","inLanguage":"zh-cn","datePublished":"2019-04-28T21:34:33+08:00","dateModified":"2019-04-28T21:34:33+08:00","author":{"@type":"Person","name":"mianhk"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://yuguocong.cn/posts/yuque/go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A02-%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/"},"publisher":{"@type":"Organization","name":"mianhk's notes","logo":{"@type":"ImageObject","url":"https://yuguocong.cn/%3Clink%20/%20abs%20url%3E"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://yuguocong.cn/ accesskey=h title="mianhk's notes (Alt + H)">mianhk's notes</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://yuguocong.cn/posts/ title=文章>
<span>文章</span>
</a>
</li>
<li>
<a href=https://yuguocong.cn/archives/ title=归档>
<span>归档</span>
</a>
</li>
<li>
<a href=https://yuguocong.cn/tags/ title=标签>
<span>标签</span>
</a>
</li>
<li>
<a href=https://yuguocong.cn/search/ title=搜索>
<span>搜索</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://yuguocong.cn/>Home</a>&nbsp;»&nbsp;<a href=https://yuguocong.cn/posts/>Posts</a></div>
<h1 class=post-title>
go语言学习(2)-极客时间
</h1>
<div class=post-meta>April 28, 2019&nbsp;·&nbsp;7 min&nbsp;·&nbsp;mianhk
</div>
</header> <div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><ul>
<li>
<a href=#%e7%ac%ac%e4%b8%80%e4%b8%aa-go-%e7%a8%8b%e5%ba%8f aria-label="第一个 go 程序">第一个 go 程序</a></li>
<li>
<a href=#%e5%8f%98%e9%87%8f%e5%b8%b8%e9%87%8f%e5%92%8c%e5%85%b6%e4%bb%96%e8%af%ad%e8%a8%80%e7%9a%84%e5%8c%ba%e5%88%ab aria-label=变量、常量和其他语言的区别>变量、常量和其他语言的区别</a></li>
<li>
<a href=#%e8%bf%90%e7%ae%97%e7%ac%a6 aria-label=运算符>运算符</a></li>
<li>
<a href=#%e6%9d%a1%e4%bb%b6%e5%92%8c%e5%be%aa%e7%8e%af aria-label=条件和循环>条件和循环</a></li>
<li>
<a href=#%e6%95%b0%e7%bb%84%e5%92%8c%e5%88%87%e7%89%87 aria-label=数组和切片>数组和切片</a><ul>
<li>
<a href=#%e6%95%b0%e7%bb%84 aria-label=数组>数组</a></li>
<li>
<a href=#%e5%88%87%e7%89%87 aria-label=切片>切片</a></li>
<li>
<a href=#%e5%88%87%e7%89%87%e5%92%8c%e6%95%b0%e7%bb%84%e7%9a%84%e5%8c%ba%e5%88%ab aria-label=切片和数组的区别>切片和数组的区别</a></li></ul>
</li>
<li>
<a href=#map-%e5%9f%ba%e7%a1%80 aria-label="Map 基础">Map 基础</a></li>
<li>
<a href=#map-%e4%b8%8e%e5%b7%a5%e5%8e%82%e6%a8%a1%e5%bc%8f aria-label="Map 与工厂模式">Map 与工厂模式</a></li>
<li>
<a href=#%e5%ad%97%e7%ac%a6%e4%b8%b2 aria-label=字符串>字符串</a><ul>
<li>
<a href=#unicode-%e5%92%8c-utf-8 aria-label="Unicode 和 UTF-8">Unicode 和 UTF-8</a></li></ul>
</li>
<li>
<a href=#go-%e8%af%ad%e8%a8%80%e7%9a%84%e5%87%bd%e6%95%b0 aria-label="Go 语言的函数">Go 语言的函数</a></li>
<li>
<a href=#%e5%8f%af%e5%8f%98%e5%8f%82%e6%95%b0%e5%8f%8a-defer aria-label="可变参数及 defer">可变参数及 defer</a></li>
<li>
<a href=#%e8%a1%8c%e4%b8%ba%e7%9a%84%e5%ae%9a%e4%b9%89%e5%92%8c%e5%ae%9e%e7%8e%b0 aria-label=行为的定义和实现>行为的定义和实现</a><ul>
<li>
<a href=#%e5%b0%81%e8%a3%85%e6%95%b0%e6%8d%ae%e5%92%8c%e8%a1%8c%e4%b8%ba aria-label=封装数据和行为>封装数据和行为</a></li>
<li>
<a href=#%e8%a1%8c%e4%b8%ba%e6%96%b9%e6%b3%95%e5%ae%9a%e4%b9%89 aria-label=行为（方法）定义>行为（方法）定义</a></li></ul>
</li>
<li>
<a href=#go-%e8%af%ad%e8%a8%80%e7%9a%84%e7%9b%b8%e5%85%b3%e6%8e%a5%e5%8f%a3 aria-label="Go 语言的相关接口">Go 语言的相关接口</a><ul>
<li>
<a href=#duck-type aria-label="Duck Type">Duck Type</a></li>
<li>
<a href=#%e6%8e%a5%e5%8f%a3%e5%8f%98%e9%87%8f aria-label=接口变量>接口变量</a></li>
<li>
<a href=#%e8%87%aa%e5%ae%9a%e4%b9%89%e7%b1%bb%e5%9e%8b aria-label=自定义类型>自定义类型</a></li></ul>
</li>
<li>
<a href=#%e6%89%a9%e5%b1%95%e4%b8%8e%e5%a4%8d%e7%94%a8 aria-label=扩展与复用>扩展与复用</a></li>
<li>
<a href=#%e4%b8%8d%e4%b8%80%e6%a0%b7%e7%9a%84%e6%8e%a5%e5%8f%a3%e7%b1%bb%e5%9e%8b%e4%b8%80%e6%a0%b7%e7%9a%84%e5%a4%9a%e6%80%81 aria-label=不一样的接口类型，一样的多态>不一样的接口类型，一样的多态</a><ul>
<li>
<a href=#%e7%a9%ba%e6%8e%a5%e5%8f%a3%e4%b8%8e%e6%96%ad%e8%a8%80 aria-label=空接口与断言>空接口与断言</a></li>
<li>
<a href=#go-%e6%8e%a5%e5%8f%a3%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5 aria-label="Go 接口最佳实践">Go 接口最佳实践</a></li></ul>
</li>
<li>
<a href=#%e7%bc%96%e5%86%99%e5%a5%bd%e7%9a%84%e9%94%99%e8%af%af%e5%a4%84%e7%90%86 aria-label=编写好的错误处理>编写好的错误处理</a></li>
<li>
<a href=#panic-%e5%92%8c-recover aria-label="panic 和 recover">panic 和 recover</a><ul>
<li>
<a href=#panic aria-label=panic>panic</a></li>
<li>
<a href=#panic-vs-osexit aria-label="panic vs os.Exit">panic vs os.Exit</a></li>
<li>
<a href=#recover aria-label=recover>recover</a></li></ul>
</li>
<li>
<a href=#%e6%9e%84%e5%bb%ba%e5%8f%af%e5%a4%8d%e7%94%a8%e7%9a%84%e6%a8%a1%e5%9d%97%e5%8c%85 aria-label=构建可复用的模块（包）>构建可复用的模块（包）</a><ul>
<li>
<a href=#package aria-label=package>package</a></li>
<li>
<a href=#init-%e6%96%b9%e6%b3%95 aria-label="init 方法">init 方法</a></li>
<li>
<a href=#go-get aria-label="go get">go get</a></li></ul>
</li>
<li>
<a href=#%e4%be%9d%e8%b5%96%e7%ae%a1%e7%90%86 aria-label=依赖管理>依赖管理</a><ul>
<li>
<a href=#go-%e6%9c%aa%e8%a7%a3%e5%86%b3%e7%9a%84%e4%be%9d%e8%b5%96%e9%97%ae%e9%a2%98 aria-label="Go 未解决的依赖问题">Go 未解决的依赖问题</a></li>
<li>
<a href=#vendor-%e8%b7%af%e5%be%84 aria-label="vendor 路径">vendor 路径</a></li></ul>
</li>
<li>
<a href=#%e5%8d%8f%e7%a8%8b%e6%9c%ba%e5%88%b6 aria-label=协程机制>协程机制</a><ul>
<li>
<a href=#%e7%ba%bf%e7%a8%8b-vs-%e5%8d%8f%e7%a8%8b aria-label="线程 vs 协程">线程 vs 协程</a></li></ul>
</li>
<li>
<a href=#%e5%85%b1%e4%ba%ab%e5%86%85%e5%ad%98%e5%b9%b6%e5%8f%91%e6%9c%ba%e5%88%b6 aria-label=共享内存并发机制>共享内存并发机制</a><ul>
<li>
<a href=#lock aria-label=Lock>Lock</a></li>
<li>
<a href=#waitgroup aria-label=WaitGroup>WaitGroup</a></li></ul>
</li>
<li>
<a href=#csp-%e5%b9%b6%e5%8f%91%e6%9c%ba%e5%88%b6 aria-label="CSP 并发机制">CSP 并发机制</a><ul>
<li>
<a href=#csp-vs-actor aria-label="CSP vs Actor">CSP vs Actor</a></li>
<li>
<a href=#channel aria-label=Channel>Channel</a></li></ul>
</li>
<li>
<a href=#%e5%a4%9a%e8%b7%af%e9%80%89%e6%8b%a9%e5%92%8c%e8%b6%85%e6%97%b6 aria-label=多路选择和超时>多路选择和超时</a><ul>
<li>
<a href=#select aria-label=select>select</a></li></ul>
</li>
<li>
<a href=#channel-%e7%9a%84%e5%85%b3%e9%97%ad%e5%92%8c%e5%b9%bf%e6%92%ad aria-label="channel 的关闭和广播">channel 的关闭和广播</a><ul>
<li>
<a href=#channel-%e7%9a%84%e5%85%b3%e9%97%ad aria-label="channel 的关闭">channel 的关闭</a></li></ul>
</li>
<li>
<a href=#%e4%bb%bb%e5%8a%a1%e7%9a%84%e5%8f%96%e6%b6%88 aria-label=任务的取消>任务的取消</a></li>
<li>
<a href=#context-%e4%b8%8e%e4%bb%bb%e5%8a%a1%e5%8f%96%e6%b6%88 aria-label="Context 与任务取消">Context 与任务取消</a><ul>
<li>
<a href=#context aria-label=Context>Context</a></li></ul>
</li>
<li>
<a href=#%e5%85%b8%e5%9e%8b%e5%b9%b6%e5%8f%91%e4%bb%bb%e5%8a%a1 aria-label=典型并发任务>典型并发任务</a><ul>
<li>
<a href=#%e5%8f%aa%e8%bf%90%e8%a1%8c%e4%b8%80%e6%ac%a1%e5%b8%b8%e8%a7%81%e7%9a%84%e5%b9%b6%e5%8f%91%e4%bb%bb%e5%8a%a1 aria-label=只运行一次（常见的并发任务）>只运行一次（常见的并发任务）</a></li>
<li>
<a href=#%e6%89%80%e9%9c%80%e4%bb%bb%e6%84%8f%e4%bb%bb%e5%8a%a1%e5%ae%8c%e6%88%90 aria-label=所需任意任务完成>所需任意任务完成</a></li>
<li>
<a href=#%e6%89%80%e6%9c%89%e4%bb%bb%e5%8a%a1%e5%ae%8c%e6%88%90 aria-label=所有任务完成>所有任务完成</a></li>
<li>
<a href=#%e5%af%b9%e8%b1%a1%e6%b1%a0 aria-label=对象池>对象池</a></li>
<li>
<a href=#syncpool-%e5%af%b9%e8%b1%a1%e7%bc%93%e5%ad%98 aria-label="sync.pool 对象缓存">sync.pool 对象缓存</a></li></ul>
</li>
<li>
<a href=#%e6%b5%8b%e8%af%95 aria-label=测试>测试</a><ul>
<li>
<a href=#%e5%8d%95%e5%85%83%e6%b5%8b%e8%af%95 aria-label=单元测试>单元测试</a><ul>
<li>
<a href=#%e5%86%85%e7%bd%ae%e5%8d%95%e5%85%83%e6%b5%8b%e8%af%95%e6%a1%86%e6%9e%b6 aria-label=内置单元测试框架>内置单元测试框架</a></li></ul>
</li>
<li>
<a href=#benchmark aria-label=Benchmark>Benchmark</a></li>
<li>
<a href=#bbd aria-label=BBD>BBD</a></li>
<li>
<a href=#%e5%8f%8d%e5%b0%84%e7%bc%96%e7%a8%8b aria-label=反射编程>反射编程</a></li>
<li>
<a href=#%e4%b8%87%e8%83%bd%e7%a8%8b%e5%ba%8f aria-label=万能程序>万能程序</a></li>
<li>
<a href=#%e4%b8%8d%e5%ae%89%e5%85%a8%e7%bc%96%e7%a8%8b aria-label=不安全编程>不安全编程</a></li></ul>
</li>
<li>
<a href=#%e6%9e%b6%e6%9e%84%e6%a8%a1%e5%bc%8f aria-label=架构模式>架构模式</a><ul>
<li>
<a href=#pipe-filter-%e6%9e%b6%e6%9e%84 aria-label="Pipe-Filter 架构">Pipe-Filter 架构</a></li>
<li>
<a href=#micro-kernel aria-label="micro kernel">micro kernel</a></li>
<li>
<a href=#%e5%86%85%e7%bd%ae-json-%e8%a7%a3%e6%9e%90 aria-label="内置 json 解析">内置 json 解析</a></li>
<li>
<a href=#easyjson aria-label=easyjson>easyjson</a></li>
<li>
<a href=#http-%e6%9c%8d%e5%8a%a1 aria-label="HTTP 服务">HTTP 服务</a></li>
<li>
<a href=#%e6%9e%84%e5%bb%ba-restful-%e6%9c%8d%e5%8a%a1 aria-label="构建 Restful 服务">构建 Restful 服务</a></li>
<li>
<a href=#%e6%80%a7%e8%83%bd%e5%88%86%e6%9e%90%e5%b7%a5%e5%85%b7 aria-label=性能分析工具>性能分析工具</a>
</li>
</ul>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><h1 id=第一个-go-程序>第一个 go 程序<a hidden class=anchor aria-hidden=true href=#第一个-go-程序>#</a></h1>
<ul>
<li>go 语言主函数没有返回值，需要使用 os 包， <code>os.exit()</code> ，也不能直接函数传参。</li>
</ul>
<h1 id=变量常量和其他语言的区别>变量、常量和其他语言的区别<a hidden class=anchor aria-hidden=true href=#变量常量和其他语言的区别>#</a></h1>
<ul>
<li>赋值可以自动类型推断： <code>a:=1</code> ，怎么方便怎么来就行</li>
<li>快速连续赋值</li>
</ul>
<pre tabindex=0><code>const (
	Monday=itoa+1
  Tuesday
  Wednesday
)

const(
	Open=1&lt;&lt;itoa
  Close
  Pending
)
</code></pre><h1 id=运算符>运算符<a hidden class=anchor aria-hidden=true href=#运算符>#</a></h1>
<ul>
<li>算数运算符：没有前置的++、&ndash;</li>
<li>比较运算符：用 <code>==</code>  比较时，相同维数的数组可以比较</li>
<li>逻辑运算符</li>
<li>位运算符： <code>&^</code> ：按位清零</li>
</ul>
<pre tabindex=0><code>1 &amp;^ 0 --1
1&amp;^ 1 --0
0&amp;^1 --0
0&amp;^0 --0
</code></pre><h1 id=条件和循环>条件和循环<a hidden class=anchor aria-hidden=true href=#条件和循环>#</a></h1>
<ul>
<li>循环：只支持 <code>for</code> ，并且没有括号，while 条件的写法为</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>for</span> <span style=color:#a6e22e>n</span>&lt;<span style=color:#ae81ff>5</span>{
	<span style=color:#a6e22e>n</span><span style=color:#f92672>++</span>
  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>n</span>)
}
</code></pre></div><ul>
<li>条件：条件一定要是个布尔值或表达式。支持在 if 语句中对变量赋值</li>
<li>switch 条件：条件表达式不限制为常量或者整数；单个 case 中，可以出现多个结果选项，使用逗号分隔；不需要 break；可以不设定 switch 之后的条件表达式</li>
</ul>
<h1 id=数组和切片>数组和切片<a hidden class=anchor aria-hidden=true href=#数组和切片>#</a></h1>
<h2 id=数组>数组<a hidden class=anchor aria-hidden=true href=#数组>#</a></h2>
<ul>
<li>数组的声明：声明同时初始化：<code>arr3:=[...]int{1,3,4,5} </code></li>
<li>数组的遍历</li>
<li>数组截取：a[index_begin(包含),index_end(不包含)]</li>
</ul>
<h2 id=切片>切片<a hidden class=anchor aria-hidden=true href=#切片>#</a></h2>
<ul>
<li>切片的声明方式：与数组的声明有点相似</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>s0</span> []<span style=color:#66d9ef>int</span>
<span style=color:#a6e22e>s1</span><span style=color:#f92672>:=</span>[]<span style=color:#66d9ef>int</span>{}
<span style=color:#a6e22e>s2</span><span style=color:#f92672>:=</span>[]<span style=color:#66d9ef>int</span>{<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>}
<span style=color:#a6e22e>s2</span><span style=color:#f92672>:=</span>make([]<span style=color:#66d9ef>int</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>4</span>)  <span style=color:#75715e>//([]type,len,cap)  len个元素会被初始化为零值，
</span><span style=color:#75715e></span>                       <span style=color:#a6e22e>cap中其它未初始化的元素不能访问</span>
</code></pre></div><ul>
<li>切片的增长方式：类似于 c++的 vector。</li>
<li>切片共享存储结构：切片截取后，计算 cap 得到的结果。其实切片截取，指向的是内部共享的切片存储空间。所以修改截取的切片的数据，其他截取的相同区域也会发生改变。这是一个容易出错的问题。</li>
</ul>
<h2 id=切片和数组的区别>切片和数组的区别<a hidden class=anchor aria-hidden=true href=#切片和数组的区别>#</a></h2>
<ul>
<li>容量是否可伸缩</li>
<li>是否可以进行比较</li>
</ul>
<h1 id=map-基础>Map 基础<a hidden class=anchor aria-hidden=true href=#map-基础>#</a></h1>
<ul>
<li>Map 声明方式</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#a6e22e>m</span><span style=color:#f92672>:=</span><span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>{<span style=color:#e6db74>&#34;one&#34;</span>:<span style=color:#ae81ff>1</span>,<span style=color:#e6db74>&#34;two&#34;</span>:<span style=color:#ae81ff>2</span>,<span style=color:#e6db74>&#34;three&#34;</span>:<span style=color:#ae81ff>3</span>}
<span style=color:#a6e22e>m1</span><span style=color:#f92672>:=</span><span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>{}
<span style=color:#a6e22e>m1</span>[<span style=color:#e6db74>&#34;one&#34;</span>]=<span style=color:#ae81ff>1</span>
<span style=color:#a6e22e>m2</span><span style=color:#f92672>:=</span>make(<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>,<span style=color:#ae81ff>10</span>)  <span style=color:#75715e>//10表示初始化的cap,不需要初始化len
</span></code></pre></div><ul>
<li>元素访问：当访问的 key 不存在时，仍然会返回零值，编程时需要根据 nil 来判断元素是否存在</li>
</ul>
<h1 id=map-与工厂模式>Map 与工厂模式<a hidden class=anchor aria-hidden=true href=#map-与工厂模式>#</a></h1>
<ul>
<li>Map 的 value 可以是一个方法</li>
<li>与 Go 的 Dock type 接口方式一起，可以方便的实现单一方法对象的工厂模式</li>
<li>Go 内置集合中没有 Set，可以通过 map 实现<code>mySet:=**map**[int]bool{}</code></li>
</ul>
<h1 id=字符串>字符串<a hidden class=anchor aria-hidden=true href=#字符串>#</a></h1>
<ul>
<li>string 是数据类型，不是引用或指针类型。零值不是空，而是空字符串。</li>
<li>string 是只读的 byte slice，不能重复赋值。len 函数可以表示它所包含的 byte 数</li>
<li>string 的 byte 数组可以存放任何数据</li>
</ul>
<h2 id=unicode-和-utf-8>Unicode 和 UTF-8<a hidden class=anchor aria-hidden=true href=#unicode-和-utf-8>#</a></h2>
<ul>
<li>Unicode 是一种字符集（code point）</li>
<li>UTF-8 是 Unicode 的存储实现（转换为）</li>
</ul>
<p><img loading=lazy src="https://cdn.nlark.com/yuque/0/2019/png/187932/1556503870325-262231e2-8b69-42ab-8711-83d68d74069e.png#align=left&display=inline&height=270&name=image.png&originHeight=398&originWidth=671&size=46907&status=done&width=456" alt=image.png>
</p>
<h1 id=go-语言的函数>Go 语言的函数<a hidden class=anchor aria-hidden=true href=#go-语言的函数>#</a></h1>
<ul>
<li>函数可以返回多个值</li>
<li>所有参数都是值传递：slice，map，channel 会有传引用的错觉</li>
<li>函数可以作为变量的值</li>
<li>函数可以作为参数和返回值</li>
</ul>
<h1 id=可变参数及-defer>可变参数及 defer<a hidden class=anchor aria-hidden=true href=#可变参数及-defer>#</a></h1>
<ul>
<li>延迟执行函数：defer。类似于其他语言中的 finally，主要作用是最后关闭一些资源或者关闭一些锁</li>
</ul>
<h1 id=行为的定义和实现>行为的定义和实现<a hidden class=anchor aria-hidden=true href=#行为的定义和实现>#</a></h1>
<h2 id=封装数据和行为>封装数据和行为<a hidden class=anchor aria-hidden=true href=#封装数据和行为>#</a></h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Employee</span> <span style=color:#66d9ef>struct</span>{
	<span style=color:#a6e22e>Id</span> <span style=color:#66d9ef>string</span>
  <span style=color:#a6e22e>Name</span> <span style=color:#66d9ef>string</span>
  <span style=color:#a6e22e>Age</span> <span style=color:#66d9ef>int</span>
}
<span style=color:#a6e22e>实例的创建和初始化</span>
<span style=color:#a6e22e>e</span><span style=color:#f92672>:=</span><span style=color:#a6e22e>Employee</span>{<span style=color:#e6db74>&#34;0&#34;</span>,<span style=color:#e6db74>&#34;Bob&#34;</span>,<span style=color:#ae81ff>20</span>}
<span style=color:#a6e22e>e1</span><span style=color:#f92672>:=</span><span style=color:#a6e22e>Employee</span>{<span style=color:#a6e22e>Name</span>:<span style=color:#e6db74>&#34;Mike&#34;</span>,<span style=color:#a6e22e>Age</span>:<span style=color:#ae81ff>30</span>}
<span style=color:#a6e22e>e2</span><span style=color:#f92672>:=</span>new(<span style=color:#a6e22e>Employee</span>)  <span style=color:#75715e>//这里返回的是实例的指针
</span><span style=color:#75715e></span><span style=color:#a6e22e>e2</span>.<span style=color:#a6e22e>Id</span>=<span style=color:#e6db74>&#34;2&#34;</span>  <span style=color:#75715e>//通过实例的指针访问指针不需要“-&gt;”
</span></code></pre></div><h2 id=行为方法定义>行为（方法）定义<a hidden class=anchor aria-hidden=true href=#行为方法定义>#</a></h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>e</span> <span style=color:#a6e22e>Employee</span>)<span style=color:#a6e22e>String1</span>() <span style=color:#66d9ef>string</span>{
	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;ID:%s-Name:%s-Age:%d&#34;</span>,<span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>Id</span>,<span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>Name</span>,<span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>Age</span>)
}

<span style=color:#75715e>//推荐使用的方式，类似于c++的引用
</span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>e</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Employee</span>)<span style=color:#a6e22e>String</span>() <span style=color:#66d9ef>string</span>{
	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;ID:%s-Name:%s-Age:%d&#34;</span>,<span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>Id</span>,<span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>Name</span>,<span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>Age</span>)
}
</code></pre></div><h1 id=go-语言的相关接口>Go 语言的相关接口<a hidden class=anchor aria-hidden=true href=#go-语言的相关接口>#</a></h1>
<h2 id=duck-type>Duck Type<a hidden class=anchor aria-hidden=true href=#duck-type>#</a></h2>
<p>方法签名是一样的，就认为是这样的</p>
<ul>
<li>接口是非入侵性的，实现不依赖于接口定义</li>
<li>接口的定义可以包含在接口使用者包内</li>
</ul>
<h2 id=接口变量>接口变量<a hidden class=anchor aria-hidden=true href=#接口变量>#</a></h2>
<p><img loading=lazy src="https://cdn.nlark.com/yuque/0/2019/png/187932/1556508509894-85f1967f-80e0-4a9e-9db7-a2b01ba96f30.png#align=left&display=inline&height=338&name=image.png&originHeight=338&originWidth=701&size=40266&status=done&width=701" alt=image.png>
</p>
<h2 id=自定义类型>自定义类型<a hidden class=anchor aria-hidden=true href=#自定义类型>#</a></h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>IntConv</span> <span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>op</span> <span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span>
</code></pre></div><h1 id=扩展与复用>扩展与复用<a hidden class=anchor aria-hidden=true href=#扩展与复用>#</a></h1>
<h1 id=不一样的接口类型一样的多态>不一样的接口类型，一样的多态<a hidden class=anchor aria-hidden=true href=#不一样的接口类型一样的多态>#</a></h1>
<h2 id=空接口与断言>空接口与断言<a hidden class=anchor aria-hidden=true href=#空接口与断言>#</a></h2>
<ul>
<li>空接口可以表示任何类型</li>
<li>通过断言来将空接口转换为制定类型 <code>v,ok:=p.(int) //ok=true时为转换成功</code></li>
</ul>
<h2 id=go-接口最佳实践>Go 接口最佳实践<a hidden class=anchor aria-hidden=true href=#go-接口最佳实践>#</a></h2>
<ul>
<li>倾向于使用小的接口定义，很多接口只包含一个方法。实现的负担较小。</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#a6e22e>Type</span> <span style=color:#a6e22e>Reader</span> <span style=color:#66d9ef>interface</span>{
	<span style=color:#a6e22e>Read</span>(<span style=color:#a6e22e>p</span> []<span style=color:#66d9ef>byte</span>)(<span style=color:#a6e22e>n</span> <span style=color:#66d9ef>int</span>,<span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
}
<span style=color:#a6e22e>Type</span> <span style=color:#a6e22e>Writer</span> <span style=color:#66d9ef>interface</span>{
	<span style=color:#a6e22e>Write</span>(<span style=color:#a6e22e>p</span> []<span style=color:#66d9ef>byte</span>)(<span style=color:#a6e22e>n</span> <span style=color:#66d9ef>int</span>,<span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
}
</code></pre></div><ul>
<li>较大的接口定义，可以由多个小接口定义组合而成。</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#a6e22e>Type</span> <span style=color:#a6e22e>ReadWrite</span> <span style=color:#66d9ef>interface</span>{
	<span style=color:#a6e22e>Reader</span>
  <span style=color:#a6e22e>Writer</span>
}
</code></pre></div><ul>
<li>只依赖于必要功能的最小接口，方法才能更多的被复用</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>StoreData</span>(<span style=color:#a6e22e>reader</span> <span style=color:#a6e22e>Reader</span>) <span style=color:#66d9ef>error</span>{}
</code></pre></div><h1 id=编写好的错误处理>编写好的错误处理<a hidden class=anchor aria-hidden=true href=#编写好的错误处理>#</a></h1>
<ul>
<li>没有异常机制</li>
<li>error 类型实现了 error 接口</li>
<li>可以通过 errors.New 来快速创建错误实例</li>
</ul>
<h1 id=panic-和-recover>panic 和 recover<a hidden class=anchor aria-hidden=true href=#panic-和-recover>#</a></h1>
<h2 id=panic>panic<a hidden class=anchor aria-hidden=true href=#panic>#</a></h2>
<ul>
<li>panic 用于不可恢复的错误</li>
<li>panic 退出前会执行 defer 指定的内容</li>
</ul>
<h2 id=panic-vs-osexit>panic vs os.Exit<a hidden class=anchor aria-hidden=true href=#panic-vs-osexit>#</a></h2>
<ul>
<li>os.Exit 退出时不会调用 defer 指定的函数</li>
<li>os.Exit 退出时不会输出当前调用栈信息</li>
</ul>
<h2 id=recover>recover<a hidden class=anchor aria-hidden=true href=#recover>#</a></h2>
<pre tabindex=0><code>defer func(){
	if err:=recover();err!=nil{
  	//恢复错误
  }
}()
</code></pre><ul>
<li>不要强制恢复错误，有的时候“Let it crash”可能更好，让程序重启来恢复。</li>
</ul>
<h1 id=构建可复用的模块包>构建可复用的模块（包）<a hidden class=anchor aria-hidden=true href=#构建可复用的模块包>#</a></h1>
<h2 id=package>package<a hidden class=anchor aria-hidden=true href=#package>#</a></h2>
<ul>
<li>基本复用模块单元：以<strong>首字母大写</strong>来表名可被包外代码访问</li>
<li>代码在 package 可以和所在的目录了不一致（相对于 Java 而言）</li>
<li>同一目录里的 Go 代码的 package 要保持一致</li>
</ul>
<h2 id=init-方法>init 方法<a hidden class=anchor aria-hidden=true href=#init-方法>#</a></h2>
<ul>
<li>在 main 被执行前，所有依赖的 package 的 init 方法都会被执行</li>
<li>不同包的 init 函数按照包导入的依赖关系决定执行顺序</li>
<li>每个包可以有多个 init 函数</li>
<li>包的每个源文件也可以有多个 init 函数，比较特殊</li>
</ul>
<h2 id=go-get>go get<a hidden class=anchor aria-hidden=true href=#go-get>#</a></h2>
<ul>
<li>通过 go get 来获取远程依赖</li>
</ul>
<pre tabindex=0><code>go get -u 强制从网络更新远程依赖
</code></pre><ul>
<li>注意代码在 Github 上的组织形式，以适应 go get：直接以代码路径开始，不要有 src</li>
</ul>
<h1 id=依赖管理>依赖管理<a hidden class=anchor aria-hidden=true href=#依赖管理>#</a></h1>
<h2 id=go-未解决的依赖问题>Go 未解决的依赖问题<a hidden class=anchor aria-hidden=true href=#go-未解决的依赖问题>#</a></h2>
<ul>
<li>同一环境下，不同项目使用同一包的不同版本</li>
<li>无法管理对包的特定版本的依赖</li>
</ul>
<h2 id=vendor-路径>vendor 路径<a hidden class=anchor aria-hidden=true href=#vendor-路径>#</a></h2>
<p>Go1.5 release 版本，vendor 目录被添加到除了 GOPATH 和 GOROOT 以外的依赖目录查找方案。查找依赖包路径的解决方案：</p>
<ol>
<li>当前包下的 vendor 目录</li>
<li>向上级目录查找，直到找到 src 下的 vendor 目录</li>
<li>在 GOPATH 下面查找依赖包</li>
<li>在 GOROOT 目录下查找</li>
</ol>
<p>其他第三方依赖管理工具：godep，glide，<strong>dep</strong>
**</p>
<h1 id=协程机制>协程机制<a hidden class=anchor aria-hidden=true href=#协程机制>#</a></h1>
<h2 id=线程-vs-协程>线程 vs 协程<a hidden class=anchor aria-hidden=true href=#线程-vs-协程>#</a></h2>
<ul>
<li>创建时默认的 stack 大小：JAVA 1M vs Goroutine 2K</li>
<li>和 KSE（Kernel Space Entity）：java Thread 是 1:1；GO M:N</li>
</ul>
<p><img loading=lazy src="https://cdn.nlark.com/yuque/0/2019/png/187932/1556704202218-7913c997-6b91-48e2-9dc6-49b057a39342.png#align=left&display=inline&height=432&name=image.png&originHeight=432&originWidth=618&size=110172&status=done&width=618" alt=image.png>
</p>
<h1 id=共享内存并发机制>共享内存并发机制<a hidden class=anchor aria-hidden=true href=#共享内存并发机制>#</a></h1>
<h2 id=lock>Lock<a hidden class=anchor aria-hidden=true href=#lock>#</a></h2>
<h2 id=waitgroup>WaitGroup<a hidden class=anchor aria-hidden=true href=#waitgroup>#</a></h2>
<p>相当于 Java 的 join</p>
<h1 id=csp-并发机制>CSP 并发机制<a hidden class=anchor aria-hidden=true href=#csp-并发机制>#</a></h1>
<h2 id=csp-vs-actor>CSP vs Actor<a hidden class=anchor aria-hidden=true href=#csp-vs-actor>#</a></h2>
<ul>
<li>和 Actor 的直接通讯不同，CSP 模式是通过 Channel 进行通讯的，更松耦合一些</li>
<li>Go 中 Channel 是有容量限制并且独立于处理 Goroutine，而如 Erlang，Actor 模式中的 mailbox 容量是无限的，接收进程也总是被动地处理消息。</li>
</ul>
<h2 id=channel>Channel<a hidden class=anchor aria-hidden=true href=#channel>#</a></h2>
<p><img loading=lazy src="https://cdn.nlark.com/yuque/0/2019/png/187932/1556705599268-5d3769a6-8c93-4827-a9c2-525810d0cc3a.png#align=left&display=inline&height=910&name=image.png&originHeight=910&originWidth=1703&size=565338&status=done&width=1703" alt=image.png>
两种情况：一种是一直等待，一种 Buffered Channel ，更松耦合的 Channel，消息发送方可以在容量没满的时候一直放，满了之后需要等待。对于接收方来说，只要 Channel 内有消息就可以一直接收。</p>
<h1 id=多路选择和超时>多路选择和超时<a hidden class=anchor aria-hidden=true href=#多路选择和超时>#</a></h1>
<h2 id=select>select<a hidden class=anchor aria-hidden=true href=#select>#</a></h2>
<p><img loading=lazy src="https://cdn.nlark.com/yuque/0/2019/png/187932/1556712290363-e32d5fa7-eb01-4d32-8fed-14ae04a0042d.png#align=left&display=inline&height=301&name=image.png&originHeight=301&originWidth=861&size=79632&status=done&width=861" alt=image.png>
运行到 select 时，当任一个事件准备好了，就可以对应响应。当不想一直等待某事件时，可以进行超时控制。</p>
<h1 id=channel-的关闭和广播>channel 的关闭和广播<a hidden class=anchor aria-hidden=true href=#channel-的关闭和广播>#</a></h1>
<p>解决怎么知道 channel 数据完了的问题</p>
<h2 id=channel-的关闭>channel 的关闭<a hidden class=anchor aria-hidden=true href=#channel-的关闭>#</a></h2>
<ul>
<li>向关闭的 channel 发送数据，会导致 panic</li>
<li>v,ok&lt;-ch；ok 为 bool 值，true 表示正常接收，false 表示通道关闭</li>
<li>所有的 channel 接收者都会在 channel 关闭时，立即从阻塞等待中返回且上述 ok 值为 false。这个广播机制常被利用，进行向多个订阅者发送信号，如：退出信号。</li>
</ul>
<h1 id=任务的取消>任务的取消<a hidden class=anchor aria-hidden=true href=#任务的取消>#</a></h1>
<h1 id=context-与任务取消>Context 与任务取消<a hidden class=anchor aria-hidden=true href=#context-与任务取消>#</a></h1>
<p><img loading=lazy src="https://cdn.nlark.com/yuque/0/2019/png/187932/1557062963366-c9338325-f390-4dce-ae1d-f0874f9612ba.png#align=left&display=inline&height=372&name=image.png&originHeight=298&originWidth=786&size=58395&status=done&width=982.4999853596094" alt=image.png>
</p>
<h2 id=context>Context<a hidden class=anchor aria-hidden=true href=#context>#</a></h2>
<ul>
<li>根 Context：通过 context.Background()创建</li>
<li>子 Context：context.WithCancel(parentContext)创建</li>
<li>ctx,cancel：context.WithCancel(context.Background())</li>
<li>当前 Context 被取消时，基于他的子 context 也会被取消</li>
<li>接收取消通知&lt;-ctx.Done()</li>
</ul>
<p>还有一些其他的方法</p>
<h1 id=典型并发任务>典型并发任务<a hidden class=anchor aria-hidden=true href=#典型并发任务>#</a></h1>
<h2 id=只运行一次常见的并发任务>只运行一次（常见的并发任务）<a hidden class=anchor aria-hidden=true href=#只运行一次常见的并发任务>#</a></h2>
<p>在常见的多任务环境下，只执行一次。单例模式（懒汉式，线程安全）</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Singleton</span> <span style=color:#66d9ef>struct</span> {

}

<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>singleInstance</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Singleton</span>
<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>once</span> <span style=color:#a6e22e>sync</span>.<span style=color:#a6e22e>Once</span>

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>GetSingletonObj</span>() <span style=color:#f92672>*</span><span style=color:#a6e22e>Singleton</span>{
	<span style=color:#a6e22e>once</span>.<span style=color:#a6e22e>Do</span>(<span style=color:#66d9ef>func</span>() {    <span style=color:#75715e>//传入创建方法
</span><span style=color:#75715e></span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Create Obj&#34;</span>)
		<span style=color:#a6e22e>singleInstance</span>=new(<span style=color:#a6e22e>Singleton</span>)
	})
	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>singleInstance</span>
}

</code></pre></div><h2 id=所需任意任务完成>所需任意任务完成<a hidden class=anchor aria-hidden=true href=#所需任意任务完成>#</a></h2>
<h2 id=所有任务完成>所有任务完成<a hidden class=anchor aria-hidden=true href=#所有任务完成>#</a></h2>
<h2 id=对象池>对象池<a hidden class=anchor aria-hidden=true href=#对象池>#</a></h2>
<p>数据库连接，网络连接，经常将这些对象池化，避免重复创建。</p>
<h2 id=syncpool-对象缓存>sync.pool 对象缓存<a hidden class=anchor aria-hidden=true href=#syncpool-对象缓存>#</a></h2>
<p>从名字来看，像是 go 语言提供的池。其实是对象的缓存
<img loading=lazy src="https://cdn.nlark.com/yuque/0/2019/png/187932/1557066107461-3144bf63-f63c-4522-b25d-af4bd721daab.png#align=left&display=inline&height=517&name=image.png&originHeight=414&originWidth=846&size=118933&status=done&width=1057.4999842420223" alt=image.png>
</p>
<ul>
<li>如果私有对象不存在则保存为私有对象</li>
<li>如果私有对象存在，就放入当前 Processor 子池的共享池中</li>
</ul>
<p>使用：
<img loading=lazy src="https://cdn.nlark.com/yuque/0/2019/png/187932/1557066277648-e57411da-71d5-4673-93bc-a82e0315284b.png#align=left&display=inline&height=341&name=image.png&originHeight=273&originWidth=497&size=37422&status=done&width=621.2499907426537" alt=image.png>
</p>
<p>**sync.pool 对象的生命周期&mdash;**sync.pool 不能作为对象池的原因</p>
<ul>
<li>GC 会清除 sync.pool 缓存的对象</li>
<li>sync.pool 对象的缓存有效期为下一次 GC 之前</li>
</ul>
<p>总结：</p>
<ul>
<li>适合于通过复用，降低复杂对象的创建和 GC 代价</li>
<li>协程安全，会有锁的开销</li>
<li>声明周期受 GC 影响，不适合于做连接池等，需自己管理生命周期资源的池化</li>
<li>所以具体要看锁的开销大，还是初始化的开销大</li>
</ul>
<h1 id=测试>测试<a hidden class=anchor aria-hidden=true href=#测试>#</a></h1>
<h2 id=单元测试>单元测试<a hidden class=anchor aria-hidden=true href=#单元测试>#</a></h2>
<p>表格测试</p>
<h3 id=内置单元测试框架>内置单元测试框架<a hidden class=anchor aria-hidden=true href=#内置单元测试框架>#</a></h3>
<ul>
<li>Fail，Error：该测试失败，该测试继续，其他测试继续执行</li>
<li>FailNow，Fatal：该测试失败，该测试中止，其他测试继续执行</li>
</ul>
<p>代码覆盖率</p>
<h2 id=benchmark>Benchmark<a hidden class=anchor aria-hidden=true href=#benchmark>#</a></h2>
<p><img loading=lazy src="https://cdn.nlark.com/yuque/0/2019/png/187932/1557067837101-3bdadb6b-821f-4dbd-9b3a-c9efe304bc7a.png#align=left&display=inline&height=491&name=image.png&originHeight=393&originWidth=679&size=77590&status=done&width=848.7499873526397" alt=image.png>
以 Benchmark 开头，参数类型稍有不同。
通过 ResetTimer 和 StopTimer 将测试代码隔开</p>
<p>命令行下运行：</p>
<h2 id=bbd>BBD<a hidden class=anchor aria-hidden=true href=#bbd>#</a></h2>
<p>Behavior Driven Development
常用框架：goconvey</p>
<h2 id=反射编程>反射编程<a hidden class=anchor aria-hidden=true href=#反射编程>#</a></h2>
<p><img loading=lazy src="https://cdn.nlark.com/yuque/0/2019/png/187932/1557107233067-f50d5086-e384-46cc-bd5e-0a2446ec3d8f.png#align=left&display=inline&height=390&name=image.png&originHeight=312&originWidth=820&size=64732&status=done&width=1024.99998472631" alt=image.png>
</p>
<p><img loading=lazy src="https://cdn.nlark.com/yuque/0/2019/png/187932/1557107389241-fb6b5237-7e73-48e9-83a9-e6c6ae45f6aa.png#align=left&display=inline&height=356&name=image.png&originHeight=285&originWidth=755&size=35453&status=done&width=943.7499859370294" alt=image.png>
</p>
<h2 id=万能程序>万能程序<a hidden class=anchor aria-hidden=true href=#万能程序>#</a></h2>
<p>DeepEqual
比较切片和 map
与配置相关的，要求灵活性和复用性时，可以
反射的</p>
<h2 id=不安全编程>不安全编程<a hidden class=anchor aria-hidden=true href=#不安全编程>#</a></h2>
<p>unsafe，一般涉及到库的交互，与 c 语言交互。
“不安全”行为危险性：Go 语言中不支持强制类型转换。下列操作看似可以，实际不能转换，而且实际使用起来很危险。</p>
<pre tabindex=0><code>i:=10
f:=*(*floa64)(unsafe.Pointer(&amp;i))
</code></pre><p>场景 2：用到内置的 Atomic 操作，指针原子操作，并发读写</p>
<h1 id=架构模式>架构模式<a hidden class=anchor aria-hidden=true href=#架构模式>#</a></h1>
<h2 id=pipe-filter-架构>Pipe-Filter 架构<a hidden class=anchor aria-hidden=true href=#pipe-filter-架构>#</a></h2>
<p><img loading=lazy src="https://cdn.nlark.com/yuque/0/2019/png/187932/1557108759332-46d3b8e2-5573-419b-80b6-63cfbf5feaa1.png#align=left&display=inline&height=510&name=image.png&originHeight=408&originWidth=782&size=86362&status=done&width=977.4999854341152" alt=image.png>
</p>
<ul>
<li>非常适合与数据处理及数据分析系统<img loading=lazy src="https://cdn.nlark.com/yuque/0/2019/png/187932/1557108843135-278143cd-9e6a-4b4f-ae49-b800e98a261c.png#align=left&display=inline&height=474&name=image.png&originHeight=379&originWidth=690&size=86777&status=done&width=862.4999871477487" alt=image.png>
</li>
</ul>
<h2 id=micro-kernel>micro kernel<a hidden class=anchor aria-hidden=true href=#micro-kernel>#</a></h2>
<p>特点：易于拓展，错误隔离，保持架构一致性
要点：</p>
<ul>
<li>内核包含公共流程或通用逻辑</li>
<li>将可变成或可扩展部分规划为扩展点</li>
<li>抽象扩展点行为，定义接口</li>
<li>利用插件进行扩展</li>
</ul>
<p>生产过程任务的开发</p>
<h2 id=内置-json-解析>内置 json 解析<a hidden class=anchor aria-hidden=true href=#内置-json-解析>#</a></h2>
<p>远程过程调用等过程中，会用 json，以及在配置文件中，很多使用 json</p>
<h2 id=easyjson>easyjson<a hidden class=anchor aria-hidden=true href=#easyjson>#</a></h2>
<p>go 内置的，一般适用于配置文件解析，对于 qps 较高，运用了反射，效率较低。尽量使用高性能的 json 解析</p>
<h2 id=http-服务>HTTP 服务<a hidden class=anchor aria-hidden=true href=#http-服务>#</a></h2>
<p><img loading=lazy src="https://cdn.nlark.com/yuque/0/2019/png/187932/1557111353880-2f261975-45c5-4dcd-9281-44ac48f2fbcb.png#align=left&display=inline&height=442&name=image.png&originHeight=354&originWidth=862&size=103367&status=done&width=1077.499983943999" alt=image.png>
<img loading=lazy src="https://cdn.nlark.com/yuque/0/2019/png/187932/1557111366213-f5138ca3-fd5f-4da1-992a-f68e1681d3ff.png#align=left&display=inline&height=445&name=image.png&originHeight=356&originWidth=771&size=101595&status=done&width=963.7499856390061" alt=image.png>
</p>
<h2 id=构建-restful-服务>构建 Restful 服务<a hidden class=anchor aria-hidden=true href=#构建-restful-服务>#</a></h2>
<p>更好的 router，httprouter
面向资源的架构（Resource Oriented Architecture）</p>
<h2 id=性能分析工具>性能分析工具<a hidden class=anchor aria-hidden=true href=#性能分析工具>#</a></h2>
<p>学习函数式编程：《计算机程序的构造和解释》functional programming
《Restful Web Service》
《Go 程序设计语言》
《面向模式的软件架构》1,2,3 本</p>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://yuguocong.cn/tags/golang/>Golang</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://yuguocong.cn/posts/yuque/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/>
<span class=title>« </span>
<br>
<span>【Git】Git使用总结</span>
</a>
<a class=next href=https://yuguocong.cn/posts/yuque/mysql%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%803/>
<span class=title> »</span>
<br>
<span>MySQL学习基础(3)</span>
</a>
</nav>
<div class=share-buttons>
<a target=_blank rel="noopener noreferrer" aria-label="share go语言学习(2)-极客时间 on twitter" href="https://twitter.com/intent/tweet/?text=go%e8%af%ad%e8%a8%80%e5%ad%a6%e4%b9%a0%282%29-%e6%9e%81%e5%ae%a2%e6%97%b6%e9%97%b4&url=https%3a%2f%2fyuguocong.cn%2fposts%2fyuque%2fgo%25E8%25AF%25AD%25E8%25A8%2580%25E5%25AD%25A6%25E4%25B9%25A02-%25E6%259E%2581%25E5%25AE%25A2%25E6%2597%25B6%25E9%2597%25B4%2f&hashtags=Golang"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share go语言学习(2)-极客时间 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fyuguocong.cn%2fposts%2fyuque%2fgo%25E8%25AF%25AD%25E8%25A8%2580%25E5%25AD%25A6%25E4%25B9%25A02-%25E6%259E%2581%25E5%25AE%25A2%25E6%2597%25B6%25E9%2597%25B4%2f&title=go%e8%af%ad%e8%a8%80%e5%ad%a6%e4%b9%a0%282%29-%e6%9e%81%e5%ae%a2%e6%97%b6%e9%97%b4&summary=go%e8%af%ad%e8%a8%80%e5%ad%a6%e4%b9%a0%282%29-%e6%9e%81%e5%ae%a2%e6%97%b6%e9%97%b4&source=https%3a%2f%2fyuguocong.cn%2fposts%2fyuque%2fgo%25E8%25AF%25AD%25E8%25A8%2580%25E5%25AD%25A6%25E4%25B9%25A02-%25E6%259E%2581%25E5%25AE%25A2%25E6%2597%25B6%25E9%2597%25B4%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share go语言学习(2)-极客时间 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fyuguocong.cn%2fposts%2fyuque%2fgo%25E8%25AF%25AD%25E8%25A8%2580%25E5%25AD%25A6%25E4%25B9%25A02-%25E6%259E%2581%25E5%25AE%25A2%25E6%2597%25B6%25E9%2597%25B4%2f&title=go%e8%af%ad%e8%a8%80%e5%ad%a6%e4%b9%a0%282%29-%e6%9e%81%e5%ae%a2%e6%97%b6%e9%97%b4"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share go语言学习(2)-极客时间 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fyuguocong.cn%2fposts%2fyuque%2fgo%25E8%25AF%25AD%25E8%25A8%2580%25E5%25AD%25A6%25E4%25B9%25A02-%25E6%259E%2581%25E5%25AE%25A2%25E6%2597%25B6%25E9%2597%25B4%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share go语言学习(2)-极客时间 on whatsapp" href="https://api.whatsapp.com/send?text=go%e8%af%ad%e8%a8%80%e5%ad%a6%e4%b9%a0%282%29-%e6%9e%81%e5%ae%a2%e6%97%b6%e9%97%b4%20-%20https%3a%2f%2fyuguocong.cn%2fposts%2fyuque%2fgo%25E8%25AF%25AD%25E8%25A8%2580%25E5%25AD%25A6%25E4%25B9%25A02-%25E6%259E%2581%25E5%25AE%25A2%25E6%2597%25B6%25E9%2597%25B4%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share go语言学习(2)-极客时间 on telegram" href="https://telegram.me/share/url?text=go%e8%af%ad%e8%a8%80%e5%ad%a6%e4%b9%a0%282%29-%e6%9e%81%e5%ae%a2%e6%97%b6%e9%97%b4&url=https%3a%2f%2fyuguocong.cn%2fposts%2fyuque%2fgo%25E8%25AF%25AD%25E8%25A8%2580%25E5%25AD%25A6%25E4%25B9%25A02-%25E6%259E%2581%25E5%25AE%25A2%25E6%2597%25B6%25E9%2597%25B4%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a>
</div>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://yuguocong.cn/>mianhk's notes</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>